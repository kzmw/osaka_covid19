<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="content-type" charset="utf-8">
  <meta name="viewport" content="width=device-width" >
  <link rel="stylesheet" href="/main.css">
  <title>大阪府新型コロナウイルス感染者情報</title>
	<style>
		@media screen and (max-width:420px) {
			.map{width:100%;
			     height:auto;}
		} 
	</style>
	<script>
function getCsvData(dataPath) {
 const request = new XMLHttpRequest();
 request.addEventListener('load', (event) => {
  const response = event.target.responseText;
  convertArray(response);
 });
 request.open('GET', dataPath, true);
 request.send();
}

function convertArray(data) {
 const dataArray = [];
 const dataString = data.split('\n');
 for (let i = 0; i < dataString.length; i++) {
  dataArray[i] = dataString[i].split(',');
 }
 let insertElement = '';
 dataArray.forEach((element) => {
  insertElement += '<tr>';
  element.forEach((childElement) => {
   insertElement += `<td>${childElement}</td>`
  });
  insertElement += '</tr>';
 });
document.getElementById('output_csv').innerHTML = insertElement;	
}

getCsvData('https://drive.google.com/uc?id=1e1_-hhNP8Li34I6E0zRutRRcn7xbKL5j');
	</script>
</head>
<body>
<header>
	<div style="margin-left:45px;height:55px;text-align:center;display:table;width:Calc(100% - 45px)"><span class="hptitle">大阪府新型コロナウイルス感染者情報</span></div>
  <div id="nav-drawer">
      <input id="nav-input" type="checkbox" class="nav-unshown">
      <label id="nav-open" for="nav-input"><span></span></label>
      <label class="nav-unshown" id="nav-close" for="nav-input"></label>
      <div id="nav-content">
      <ul>
   <li><a href="/index.html">トップページ</a></li>
   <li><a href="http://www.pref.osaka.lg.jp/default.html">大阪府ホームページ</a></li>
   <li><a href="https://covid19-osaka.info/">大阪府新型コロナウイルス感染症特設サイト</a></li>
   <li><a href="https://www.mhlw.go.jp/index.html">厚生労働省ホームページ</a></li>
   <li><a href="/about.html">このページについて</a></li>
  </ul>   
    </div>
  </div>
	</header>
  <div class="content_div" style="padding-top:55px">
<ul class="important_ul">
      <li class="important_li"><span class="news_title">緊急事態宣言</span><span class="important_content">不要不急の外出は控えましょう。</span></li></ul>
<span class="number_title">大阪府で確認された感染者数</span><span id="number_text">894</span><span class="number_title">人</span>
<div class="kakomi-box11"><span class="title-box11">男女比</span>男性：57.4%<br>女性：42.6%</div>
<div class="kakomi-box11"><span class="title-box11">年齢比</span>10代：50%<br>120代：50%</div>
<div class="kakomi-box11"><span class="title-box11">症状例</span>胸がドキドキ：340人<br>記憶喪失：50000人</div>
<table>
 <tr><th>居住地</th><th>人口</th><th>感染者数</th><th>前日比</th><th>感染者の割合</th></tr>
	<tr><td>大阪府外</td><td></td><td>16</td><td>1</td><td></td></tr>
	<tr><td>大阪市</td><td>2,744,379</td><td>421</td><td>36</td><td>6,519人に1人</td></tr>
	<tr><td>堺市</td><td>827,055</td><td>61</td><td>1</td><td>13,558人に1人</td></tr>
	<tr><td>能勢町</td><td>9,155</td><td>2</td><td>0</td><td>4,578人に1人</td></tr>
	<tr><td>豊能町</td><td>18,290</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>池田市</td><td>103,980</td><td>13</td><td>0</td><td>7,998人に1人</td></tr>
	<tr><td>箕面市</td><td>136,364</td><td>17</td><td>0</td><td>8,021人に1人</td></tr>
	<tr><td>豊中市</td><td>400,655</td><td>35</td><td>1</td><td>11,447人に1人</td></tr>
	<tr><td>茨木市</td><td>283,081</td><td>13</td><td>0</td><td>21,775人に1人</td></tr>
	<tr><td>高槻市</td><td>347,833</td><td>18</td><td>0</td><td>19,324人に1人</td></tr>
	<tr><td>島本町</td><td>31,030</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>吹田市</td><td>382,442</td><td>42</td><td>0</td><td>9,106人に1人</td></tr>
	<tr><td>摂津市</td><td>85,998</td><td>6</td><td>1</td><td>14,333人に1人</td></tr>
	<tr><td>枚方市</td><td>398,397</td><td>21</td><td>0</td><td>18,971人に1人</td></tr>
	<tr><td>交野市</td><td>76,152</td><td>8</td><td>0</td><td>9,519人に1人</td></tr>
	<tr><td>寝屋川市</td><td>229,401</td><td>6</td><td>2</td><td>38,234人に1人</td></tr>
	<tr><td>守口市</td><td>142,214</td><td>10</td><td>0</td><td>14,221人に1人</td></tr>
	<tr><td>門真市</td><td>119,393</td><td>17</td><td>0</td><td>7,023人に1人</td></tr>
	<tr><td>四條畷市</td><td>55,443</td><td>3</td><td>0</td><td>18,481人に1人</td></tr>
	<tr><td>大東市</td><td>119,860</td><td>31</td><td>3</td><td>3,866人に1人</td></tr>
	<tr><td>東大阪市</td><td>493,656</td><td>29</td><td>2</td><td>17,023人に1人</td></tr>
	<tr><td>八尾市</td><td>265,959</td><td>25</td><td>4</td><td>10,638人に1人</td></tr>
	<tr><td>柏原市</td><td>68,354</td><td>4</td><td>0</td><td>17,089人に1人</td></tr>
	<tr><td>松原市</td><td>117,971</td><td>11</td><td>2</td><td>10,725人に1人</td></tr>
	<tr><td>羽曳野市</td><td>109,250</td><td>5</td><td>0</td><td>21,850人に1人</td></tr>
	<tr><td>藤井寺市</td><td>63,678</td><td>2</td><td>0</td><td>31,839人に1人</td></tr>
	<tr><td>太子町</td><td>13,169</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>河南町</td><td>15,688</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>千早赤阪村</td><td>4,888</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>富田林市</td><td>109,687</td><td>1</td><td>0</td><td>109,687人に1人</td></tr>
	<tr><td>大阪狭山市</td><td>58,762</td><td>4</td><td>0</td><td>14,691人に1人</td></tr>
	<tr><td>河内長野市</td><td>101,520</td><td>4</td><td>0</td><td>25,380人に1人</td></tr>
	<tr><td>和泉市</td><td>185,311</td><td>33</td><td>2</td><td>5,615人に1人</td></tr>
	<tr><td>高石市</td><td>56,119</td><td>1</td><td>0</td><td>56,119人に1人</td></tr>
	<tr><td>泉大津市</td><td>74,417</td><td>5</td><td>1</td><td>14,883人に1人</td></tr>
	<tr><td>忠岡町</td><td>16,821</td><td>0</td><td>0</td><td></td></tr>
	<tr><td>岸和田市</td><td>189,418</td><td>15</td><td>0</td><td>12,628人に1人</td></tr>
	<tr><td>貝塚市</td><td>85,589</td><td>3</td><td>2</td><td>28,530人に1人</td></tr>
	<tr><td>熊取町</td><td>43,877</td><td>1</td><td>0</td><td>43,877人に1人</td></tr>
	<tr><td>泉佐野市</td><td>100,123</td><td>5</td><td>0</td><td>20,025人に1人</td></tr>
	<tr><td>田尻町</td><td>8,412</td><td>1</td><td>0</td><td>8,412人に1人</td></tr>
	<tr><td>泉南市</td><td>60,219</td><td>1</td><td>0</td><td>60,219人に1人</td></tr>
	<tr><td>阪南市</td><td>51,542</td><td>1</td><td>1</td><td>51,542人に1人</td></tr>
	<tr><td>岬町</td><td>15,025</td><td>0</td><td>0</td><td></td></tr>
</table>
<table>
 <tbody id="output_csv"></tbody>
</table>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
(function(fn) {
    if (document.readyState !== 'loading'){
        fn();
    } else {
        document.addEventListener('DOMContentLoaded', fn);
    }
})(function() {
    var WIDTH = 400, HEIGHT = 500;
    var svg = d3.selectAll("#map")
        .attr("width", WIDTH)
        .attr("height", HEIGHT);
    
    var g = svg.append("g");
    var color = [ "red", "green", "blue" ];
    d3.json('/osaka.geojson').then(function(json) {
        var projection = d3.geoMercator()
            .scale(25000)
            .center(d3.geoCentroid(json))
            .translate([WIDTH / 2, HEIGHT / 2]);
        var path = d3.geoPath()
            .projection(projection);
        g.selectAll('path')
            .data(json.features)
            .enter()
            .append('path')
            .attr('d', path)
            .attr('fill', "gray")
	    .attr('stroke', "white");
	    
        g.selectAll('text')
            .data(json.features)
            .enter()
	    .append('text')
	    .attr('text-anchor', "middle")
	    .attr('x', function(d) {
                var p = d3.geoCentroid(d);
var q = projection((p[0] + "," + p[1]).split(","));
                return q[0];
            })
	    .attr('y', function(d) {
                var p = d3.geoCentroid(d);
var q = projection((p[0] + "," + p[1]).split(","));
                return q[1];
            })
            .text(function(d) {
                var p = d.properties;
                return p.N03_004;
            })
	    .style("fill", "black")
	    .attr("font-size","9pt");
    });
});</script>
<svg id="map"></svg><br>	  
<a href="http://kzmw.github.io/index.html">
  <img src="https://ga-beacon.appspot.com/UA-163404333-1/kzmw.github.io/index.html?flat-gif"/>
</a>
